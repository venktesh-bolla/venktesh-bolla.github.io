<?php

$page_builder = __( 'Page Builder', 'modulus' );
$page_builder_details = __( 'Modulus Pro supports Page Builder. All our shortcodes can be used as widgets too. You can drag and drop our widgets with page builder visual editor.', 'modulus' );
$page_layout = __( 'Page Layout', 'modulus' );
$page_layout_details = __( 'Modulus Pro offers many different page layouts so you can quickly and easily create your pages with various layout without any hassle!', 'modulus' );
$unlimited_sidebar = __( 'Unlimited Sidebar', 'modulus' );
$unlimited_sidebar_details = __( 'Unlimited sidebars allows you to create multiple sidebars. Check out our demo site to see how different pages displays different sidebars!', 'modulus' );
$shortcode_builder = __( 'Shortcode Builder', 'modulus' );
$shortcode_builder_details = __( 'With our shortcode builder and lots of shortcodes, you can easily create nested shortcodes and build custom pages!', 'modulus' );
$portfolio = __( 'Multi Portfolio', 'modulus' );
$portfolio_details = __( '7 portfolio layouts with Isotope filtering, 3 blog layouts and multiple other alternate layouts for interior pages!', 'modulus' );
$typography = __( 'Typography', 'modulus' );
$typography_details = __( 'Modulus Pro loves typography, you can choose from over 500+ Google Fonts and Standard Fonts to customize your site!', 'modulus' );
$slider = __( 'Awesome Sliders', 'modulus' );
$slider_details = __( 'Modulus Pro includes two types of slider. You can use both Flex and Elastic sliders anywhere in your site.', 'modulus' );
$woocommerce = __( 'Woo Commerce', 'modulus' );
$woocommerce_details = __( 'Modulus Pro has full design/code integration for WooCommerce, your shop will look as good as the rest of your site!', 'modulus' );
$custom_widget = __( 'Custom Widget', 'modulus' );
$custom_widget_details = __( 'We offer many custom widgets that are stylized and ready for use. Simply drag &amp; drop into place to activate!', 'modulus' );
$advanced_admin = __( 'Advanced Admin', 'modulus' );
$advanced_admin_details = __( 'Advanced Redux Framework for theme options panel, you can customize any part of your site quickly and easily!', 'modulus' );
$font_awesome = __( 'Font Awesome', 'modulus' );
$font_awesome_details = __( 'Font Awesome icons are fully integrated into the theme. Use them anywhere in your site in 6 different sizes!', 'modulus' );
$responsive_layout = __( 'Responsive Layout', 'modulus' );
$responsive_layout_details = __( 'Modulus Pro is fully responsive and can adapt to any screen size. Resize your browser window to view it!', 'modulus' );
$testimonials = __( 'Testimonials', 'modulus' );
$testimonials_details = __( 'With our testimonial post type, shortcode and widget, Displaying testimonials is a breeze.', 'modulus' );
$social_media = __( 'Social Media', 'modulus' );
$social_media_details = __( 'Want your users to stay in touch? No problem, modulus Pro has Social Media icons all throughout the theme!', 'modulus' );
$google_map = __( 'Google Map', 'modulus' );
$google_map_details = __( 'Modulus Pro includes Goole Map as shortcode and widget. So, you can use it anywhere in your site!', 'modulus' );
$view_demo = __( 'View Demo', 'modulus');
$upgrade_to_pro = __( 'Upgrade To Pro', 'modulus' );


$modulus_why_upgrade = <<< FEATURES
<p class="wrap-header">
	<a class="view-demo" href="http://modulus.webulous.in/">
		<i class="fa fa-eye"></i> $view_demo</a> 
	<a class="upgrade" href="http://www.webulousthemes.com/?add-to-cart=3899">
		<i class="fa fa-upload"></i> $upgrade_to_pro</a>
</p>
<div class="one-third column clear">
	<div class="icon-wrap"><i class="fa  fa-5x fa-cog"></i></div>
	<h3>$page_builder</h3>
	<p>$page_builder_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-th-large"></i></div>
	<h3>$page_layout</h3>
	<p>$page_layout_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-th"></i></div>
	<h3>$unlimited_sidebar</h3>
	<p>$unlimited_sidebar_details</p>
</div>
<div class="one-third column clear">
	<div class="icon-wrap"><i class="fa  fa-5x fa-code-fork"></i></div>
	<h3>$shortcode_builder</h3>
	<p>$shortcode_builder_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-camera"></i></div>
	<h3>$portfolio</h3>
	<p>$portfolio_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-font"></i></div>
	<h3>$typography</h3>
	<p>$typography_details</p>
</div>
<div class="one-third column clear">
	<div class="icon-wrap"><i class="fa  fa-5x fa-slideshare"></i></div>
	<h3>$slider</h3>
	<p>$slider_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-leaf"></i></div>
	<h3>$woocommerce</h3>
	<p>$woocommerce_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-tasks"></i></div>
	<h3>$custom_widget</h3>
	<p>$custom_widget_details</p>
</div>
<div class="one-third column clear">
	<div class="icon-wrap"><i class="fa  fa-5x fa-dashboard"></i></div>
	<h3>$advanced_admin</h3>
	<p>$advanced_admin_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-magic"></i></div>
	<h3>$font_awesome</h3>
	<p>$font_awesome_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-arrows"></i></div>
	<h3>$responsive_layout</h3>
	<p>$responsive_layout_details</p>
</div>
<div class="one-third column clear">
	<div class="icon-wrap"><i class="fa  fa-5x fa-magic"></i></div>
	<h3>$testimonials</h3>
	<p>$testimonials_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-twitter"></i></div>
	<h3>$social_media</h3>
	<p>$social_media_details</p>
</div>
<div class="one-third column">
	<div class="icon-wrap"><i class="fa  fa-5x fa-map-marker"></i></div>
	<h3>$google_map</h3>
	<p>$google_map_details</p>
</div>
FEATURES;

function modulus_theme_page() {
	add_theme_page( 
		__( 'Upgrade To modulus Pro','modulus'),
		__( 'Theme Upgrade','modulus'),
		'edit_theme_options',
		'modulus_upgrade',
		'modulus_display_upgrade'
	);
}

add_action('admin_menu','modulus_theme_page');


function modulus_display_upgrade() {
	global $modulus_why_upgrade;
	echo '<div class="wrap">';
	echo $modulus_why_upgrade;
	echo '</div>';
}

	$options = array(
		'capability' => 10,
		'type' => 'theme_mod',
		'panels' => apply_filters( 'modulus_customizer_options', array(
			'modulus' => array(
				'priority'       => 9,
				'title'          => __('Modulus Options', 'modulus'),
				'description'    => __('Modulus Theme Options', 'modulus'),
				'sections' => array(
					'general' => array(
						'title' => __('General', 'modulus'),
						'description' => __('General settings that affects overall site', 'modulus'),
						'fields' => array(
							'breadcrumb' => array(
								'type' => 'checkbox',
								'label' => __('Enable Breadcrumb', 'modulus'),
								'default' => 0,
								'sanitize_callback' => 'modulus_boolean',
							),
							'breadcrumb_char' => array(
								'type' => 'select',
								'label' => __('Select Breadcrumb Character', 'modulus'),
								'choices' => array(
									'1' => ' &raquo; ',
									'2' => ' // ',
									'3' => ' > '
								),
								'sanitize_callback' => 'modulus_breadcrumb_char_choices',
								'default' => '1',
							),
							 'numeric_pagination' => array(
                                'type' => 'checkbox',
                                'label' => __('Enable Numeric Page Navigation', 'modulus'),
                                'description' => __('Check to display numeric page navigation, instead of Previous Posts / Next Posts links.', 'modulus'),
                                'default' => 1,  
                            ),
                            'sidebar_position' => array(
                                'type' => 'radio',
                                'label' => __('Main Layout', 'modulus'),
                                'description' => __('Select main content and sidebar alignment.', 'modulus'),
                                'choices' => array(
                                    'left' => __('Sidebar Left', 'modulus'),
                                    'right' => __('Sidebar Right', 'modulus'),
                                ),
                                'default' => 'right',  
                            ),
						),
					),
					'header' => array(
						'title' => __('Header', 'modulus'),
						'description' => __('Header options', 'modulus'),
						'fields' => array(
							'logo_title' => array(
								'type' => 'checkbox',
								'label' => __('Logo as Title', 'modulus'),
								'default' => 0,
								'sanitize_callback' => 'modulus_boolean',
							),
							'logo' => array(
								'type' => 'image',
								'label' => __('Upload Logo', 'modulus'),
								'sanitize_callback' => 'esc_url_raw',
							),
							'tagline' => array(
								'type' => 'checkbox',
								'label' => __('Show site Tagline', 'modulus'),
								'default' => 1,
								'sanitize_callback' => 'modulus_boolean',
							),
							'header_search' => array(
                                'type' => 'checkbox',
                                'label' => __('Show Search box in Navigation', 'modulus'),
                                'default' => 1,
                                'sanitize_callback' => 'modulus_boolean',
                            ),
						),
					),
 					'primary_color_field' => array(      
                        'title' => __('Change Color Options', 'modulus'),
                        'description' => __('This will reflect in links, buttons,Navigation and many others. Choose a color to match your site.', 'modulus'),
                        'fields' => array(
                            'enable_primary_color' => array(
                                'type' => 'checkbox',
                                'label' => __('Enable Custom Primary color', 'modulus'),
                                'default' => 0,
                                'sanitize_callback' => 'modulus_boolean',
                            ),
                            'primary_color' => array(
                                'type' => 'color',
                                'label' => __('Primary Color', 'modulus'),   
                                'description' => __('', 'modulus'),
                                'sanitize_callback' => 'sanitize_hex_color',
                                'default' => '#03a9f4'
                            ),
                            'enable_nav_bg_color' => array(
                                'type' => 'checkbox',
                                'label' => __('Enable Custom Navigation Background color', 'modulus'),
                                'default' => 0,
                                'sanitize_callback' => 'modulus_boolean',
                            ),
                            'nav_bg_color' => array(   
                                'type' => 'color',
                                'label' => __('Navigation Background Color', 'modulus'),   
                                'description' => __('', 'modulus'),
                                'sanitize_callback' => 'sanitize_hex_color',
                                'default' => '#03a9f4'
                            ),
                            'enable_nav_hover_color' => array(
                                'type' => 'checkbox',
                                'label' => __('Enable Custom Navigation Hover color', 'modulus'),
                                'default' => 0,
                                'sanitize_callback' => 'modulus_boolean',
                            ),
                            'nav_hover_color' => array(   
                                'type' => 'color',
                                'label' => __('Navigation Hover Color', 'modulus'),   
                                'description' => __('', 'modulus'),
                                'sanitize_callback' => 'sanitize_hex_color',
                                'default' => '#33363a'
                            ),
                            'enable_dd_hover_color' => array(
                                'type' => 'checkbox',
                                'label' => __('Enable Custom Navigation Dropdown Hover color', 'modulus'),
                                'default' => 0,
                                'sanitize_callback' => 'modulus_boolean',
                            ),
                            'dd_hover_color' => array(   
                                'type' => 'color',
                                'label' => __('Navigation Dropdown Hover Color', 'modulus'),   
                                'description' => __('', 'modulus'),
                                'sanitize_callback' => 'sanitize_hex_color',
                                'default' => '#03a9f4'
                            ),
                            'enable_rippler_color' => array(
                                'type' => 'checkbox',
                                'label' => __('Enable Custom Rippler color', 'modulus'),
                                'default' => 0,
                                'sanitize_callback' => 'modulus_boolean',
                            ),
                            'rippler_color' => array(   
                                'type' => 'color',
                                'label' => __('Rippler Color', 'modulus'),   
                                'description' => __('', 'modulus'),
                                'sanitize_callback' => 'sanitize_hex_color',
                                'default' => '#fff'
                            ),
                     
                        ),
                    ),
                    
					'footer' => array(
						'title' => __('Footer', 'modulus'),
						'description' => __('Footer related options', 'modulus'),
						'fields' => array(
							'footer_widgets' => array(
								'type' => 'checkbox',
								'label' => __('Footer Widget Area', 'modulus'),
								'default' => 1,
								'sanitize_callback' => 'modulus_boolean',
							),
							'copyright' => array(
                                'type' => 'textarea',
                                'label' => __('Footer Copyright Text (Validated that it\'s HTML Allowed)', 'modulus'),
                                'description' => __('HTML Allowed. <b>This field is even HTML validated! </b>', 'modulus'),
                                'sanitize_callback' => 'wbls_footer_copyright',
                            ),
						),
					),
					'home' => array(
						'title' => __('Home', 'modulus'),
						'description' => __('Home Page options', 'modulus'),
						'fields' => array(
							'slider_cat' => array(
								'type' => 'category',
								'label' => __('Slider Posts Category', 'modulus'),
								'sanitize_callback' => 'absint',
							),
							'slider_count' => array(
								'type' => 'text',
								'label' => __('No. of Sliders', 'modulus'),
								'sanitize_callback' => 'absint',
							),
							'service_1' => array(
								'type' => 'dropdown-pages',
								'label' => __('Service Section #1', 'modulus'),
								'sanitize_callback' => 'absint',
							),
							'service_2' => array(
								'type' => 'dropdown-pages',
								'label' => __('Service Section #2', 'modulus'),
								'sanitize_callback' => 'absint',
							),
							'service_3' => array(
								'type' => 'dropdown-pages',
								'label' => __('Service Section #3', 'modulus'),
								'sanitize_callback' => 'absint',
							),
							'recent_posts_count' => array(
								'type' => 'text',
								'label' => __('No. of Recent Posts', 'modulus'),
								'sanitize_callback' => 'absint',
							),
							'page-builder' => array(
                                'type' => 'checkbox',
                                'label' => __('Use Page Builder: Check this to disable theme options for home page content and use page builder to enter content', 'modulus'),
                                'description' => __(' Check to display breadcrumb navigation.', 'modulus'),
                                'default' => 0,  
                            ),
                            'flexslider' => array(
                                'type' => 'text',
                                'label' => __('Enter FlexSlider shortcode (FlexSlider for Home Page)', 'modulus'),
                                'description' => __('FlexSlider for Home Page.  Enter a FlexSlider shortcode to be displayed on Home Page','modulus'),
                                'sanitize' => 'sanitize_text_field'
                            ),
						),
					),
					'blog' => array(
						'title' => __('Blog', 'modulus'),
						'description' => __('Blog related options', 'modulus'),
						'fields' => array(
							'featured_image' => array(
								'type' => 'checkbox',
								'label' => __('Enable Featured Image', 'modulus'),
								'default' => 1,
								'sanitize_callback' => 'modulus_boolean',
							),
                           'featured_image_size' => array(
                                'type' => 'radio',
                                'label' => __('Choose the featured image display type for Blog Page ', 'modulus'),
                                'choices' => array(
                                    '1' => 'Large Featured Image',
                                    '2' => 'Small Featured Image',        
                                ),
                                'default' => '1',      
                            ),
							'single_featured_image' => array(
								'type' => 'checkbox',
								'label' => __('Enable Single Post Featured Image', 'modulus'),
								'default' => 1,
								'sanitize_callback' => 'modulus_boolean',
							),
                         'single_featured_image_size' => array(
                                'type' => 'radio',
                                'label' => __('Choose the featured image display type for Single Page ', 'modulus'),
                                'choices' => array(
                                    '1' => 'Large Featured Image',
                                    '2' => 'Small Featured Image',      
                                ),
                                'default' => '1',   
                            ),
                             'author_bio_box' => array(
                                'type' => 'checkbox',
                                'label' => __(' Enable Author Bio Box below single post', 'modulus'),
                                'description' => __('Show Author information box below single post.', 'modulus'),
                                'default' => 0,  
                            ),
                            'social_sharing_box' => array(
                                'type' => 'checkbox',
                                'label' => __('Show social sharing options box below single post', 'modulus'),
                                'description' => __('Show social sharing options box below single post.', 'modulus'),
                                'default' => 1,  
                            ),
                            'related_posts' => array(
                                'type' => 'checkbox',
                                'label' => __('Show related posts', 'modulus'),
                                'description' => __('Show related posts.', 'modulus'),
                                'default' => 0,  
                            ),
                            'comments' => array(
                                'type' => 'checkbox',
                                'label' => __(' Show Comments', 'modulus'),
                                'description' => __('Show Comments', 'modulus'),
                                'default' => 1,  
                            ),
						),
					),
                    'social_sharing_box' => array(
                        'title' => __('Social Sharing Box', 'modulus'),
                        'description' => __('Social Sharing Icons Setup', 'modulus'),
                        'fields' => array(
                            'facebook_sb' => array(
                                'type' => 'checkbox',
                                'label' => __('Show facebook sharing option in single posts', 'modulus'),
                                'description' => __('Show facebook sharing option in single posts.', 'modulus'),
                                'default' => 1,  
                            ),
                            'twitter_sb' => array(
                                'type' => 'checkbox',
                                'label' => __('Show twitter sharing option in single posts', 'modulus'),
                                'description' => __('Show twitter sharing option in single posts.', 'modulus'),                                'default' => 1,  
                            ),
                            'linkedin_sb' => array(
                                'type' => 'checkbox',
                                'label' => __('Show linkedin sharing option in single posts', 'modulus'),
                                'description' => __('Show linkedin sharing option in single posts.', 'modulus'),
                                'default' => 1,  
                            ),
                            'google-plus_sb' => array(
                                'type' => 'checkbox',
                                'label' => __('Show googleplus sharing option in single posts', 'modulus'),
                                'description' => __('Show googleplus sharing option in single posts.', 'modulus'),
                                'default' => 1,  
                            ),
                            'email_sb' => array(
                                'type' => 'checkbox',
                                'label' => __('Show email sharing option in single posts', 'modulus'),
                                'description' => __('Show email sharing option in single posts.', 'modulus'),
                                'default' => 1,  
                            ),
                        ),
                    ),

				)
			),
		) 
	)
	);

function modulus_boolean($value) {
	if(is_bool($value)) {
		return $value;
	} else {
		return false;
	}
}

function modulus_breadcrumb_char_choices($value='') {
	$choices = array('1','2','3');

	if( in_array($value, $choices)) {
		return $value;
	} else {
		return '1';
	}
}

if ( ! function_exists( 'wbls_footer_copyright' ) ) {

    function wbls_footer_copyright($string) {
        $allowed_tags = array(    
                                'a' => array(
                                    'href' => array(),
                                    'title' => array()
                            ),
                                'em' => array(),
                                'strong' => array(),
        );
        return wp_kses( $string,$allowed_tags);

    }
}